<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A reimplementation of a generic database interface for R: easier to extend, more responsibilities, solving long-standing issues.">
<title>DBI revisited • dbi3</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="DBI revisited">
<meta property="og:description" content="A reimplementation of a generic database interface for R: easier to extend, more responsibilities, solving long-standing issues.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">dbi3</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/dbi3.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-dbi/dbi3/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="dbi3">dbi3<a class="anchor" aria-label="anchor" href="#dbi3"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of this repository is to design a new database interface from scratch, based on the lessons learned from DBI and the previous R Consortium projects. The interface provides compatibility to DBI in both directions: the new interface supports existing DBI backends (possibly with degraded performance), and backends implemented against the new interface automatically support DBI. Backends for the new interface will be easier to implement, because they can use the full feature set provided by dbi3.</p>
<p>In the beginning, the issue tracker will be used to collect and categorize issues that did not fit the scope of {DBI} or related packages. Eventually, the repository will contain a working package and a design document.</p>
<div class="section level2">
<h2 id="properties">Properties<a class="anchor" aria-label="anchor" href="#properties"></a>
</h2>
<ul>
<li>async-first
<ul>
<li>required for efficient web applications: Shiny and Plumber</li>
<li>simpler to implement a synchronous interface from an async interface than the other way round</li>
</ul>
</li>
<li>only pure functions/methods with callbacks
<ul>
<li>idiomatic to R</li>
</ul>
</li>
<li>agnostic to query language
<ul>
<li>concepts: context, connection, query objects, tables, query strings, parameters</li>
</ul>
</li>
<li>reference implementation: generic backend for DBI classic</li>
</ul>
</div>
<div class="section level2">
<h2 id="issues-and-solutions">Issues and solutions<a class="anchor" aria-label="anchor" href="#issues-and-solutions"></a>
</h2>
<p>The following list of issues, collected 2024-04-14, were categorized by how (and where) they can be solved, taking into account the new <a href="https://arrow.apache.org/adbc/" class="external-link">ADBC standard</a> and the new <a href="https://adbi.r-dbi.org/" class="external-link">adbi package</a>.</p>
<div class="section level3">
<h3 id="solved-by-adbc-performance">Solved by ADBC: Performance<a class="anchor" aria-label="anchor" href="#solved-by-adbc-performance"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/20" class="external-link">Query cancellation</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/48" class="external-link">Arrow/Flight SQL</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/9" class="external-link">let dbreadtable use copy</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="solved-by-adbc-data-format">Solved by ADBC: Data format<a class="anchor" aria-label="anchor" href="#solved-by-adbc-data-format"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/2" class="external-link">Send parameter types</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/10" class="external-link">libpq expects knowledge about data types for parametrized queries</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/58" class="external-link">Optionally return tibbles</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/6" class="external-link">Raise error if data type domain differs between R and database</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/22" class="external-link">Specialised data types in R</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/17" class="external-link">Think about column conversion</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/44" class="external-link">Support arrays natively</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="solved-by-adbc-usability">Solved by ADBC: Usability<a class="anchor" aria-label="anchor" href="#solved-by-adbc-usability"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/47" class="external-link">Rethink <code>immediate</code> argument</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/56" class="external-link">Streaming multiple statements in a single dbExecute/dbQuery/etc. call</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/51" class="external-link">Add default dbWriteTable() method</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="to-be-solved-by-adbcarrow-usability">To be solved by ADBC/Arrow: Usability<a class="anchor" aria-label="anchor" href="#to-be-solved-by-adbcarrow-usability"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/19" class="external-link">Think about asynchronous operations</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/11" class="external-link">Implement RStudio Connection Contract</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/23" class="external-link">dbGetChunkedQuery()</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="interface-wrapper-around-adbcdrivermanager">Interface: wrapper around adbcdrivermanager?<a class="anchor" aria-label="anchor" href="#interface-wrapper-around-adbcdrivermanager"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/16" class="external-link">Progress bar for dbWriteTable?</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/24" class="external-link">dbWithConnection() and dbWithResult()</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/25" class="external-link">Specify n argument for dbReadTable()</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/57" class="external-link">Default connection</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="quoting-dbplyr">Quoting: dbplyr?<a class="anchor" aria-label="anchor" href="#quoting-dbplyr"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/55" class="external-link"><code>dbQuoteIdentifier</code> should validate SQL inputs</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/46" class="external-link">Reading and writing tables with dots in name</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/45" class="external-link">Stronger guarantees for quoting literals</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/52" class="external-link">Specify limits per connection or per driver</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="sql-generation-dbplyr">SQL generation: dbplyr?<a class="anchor" aria-label="anchor" href="#sql-generation-dbplyr"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/4" class="external-link">Allow creation of tables with primary key and/or index</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/18" class="external-link">Do you have any intention of adding the “upsert” function?</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/43" class="external-link">Support passing lists as arguments for queries like <code>SELECT a, b WHERE a IN ($1)</code></a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/53" class="external-link">How to create an external table in Hive?</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/41" class="external-link">Name collision when creating tables</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="introspection-dm">Introspection: dm?<a class="anchor" aria-label="anchor" href="#introspection-dm"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/15" class="external-link">More arguments to dbListObjects() to narrow result set</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/12" class="external-link">Think about listing temporary tables</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="interface-maintenance">Interface: maintenance<a class="anchor" aria-label="anchor" href="#interface-maintenance"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/5" class="external-link">Use ellipsis::check_dots_used() in dbConnect</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/7" class="external-link">Consider standard timezone and timezone_out arguments to dbConnect()</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/37" class="external-link">Add tweak for restricting to one result set per connection</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="documentation-maintenance">Documentation: maintenance<a class="anchor" aria-label="anchor" href="#documentation-maintenance"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/26" class="external-link">Dynamically list methods in generic documentation</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/27" class="external-link">dbConnect should give advice about argument names</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/35" class="external-link">Should backends use “Depends: DBI”?</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="testing-maintenance">Testing: maintenance<a class="anchor" aria-label="anchor" href="#testing-maintenance"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/49" class="external-link">How to run tests on a user’s database?</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/36" class="external-link">Reenable test for dbIsReadOnly()</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/8" class="external-link">Think about moving DBItest code here</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/3" class="external-link">Avoid DML in tests</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/42" class="external-link">Avoid hard-coded data types in queries</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/40" class="external-link">Specify and test case-sensitivity for table names</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/39" class="external-link">Test for formals(dbXxx) ineffective</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/38" class="external-link">Specify binding of different argument types for different calls of dbBind()</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/50" class="external-link">Feature Request: Virtual connection</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="parameterized-queries-unclear-are-they-necessary-for-data-analysis">Parameterized queries: unclear, are they necessary for data analysis?<a class="anchor" aria-label="anchor" href="#parameterized-queries-unclear-are-they-necessary-for-data-analysis"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/34" class="external-link">Provide interfaces and support for Parameterised Queries</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/1" class="external-link">Think about ways to specify placeholder in prepared/parametrized query</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/13" class="external-link">Used named parameters in parameterized statements</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="reconnection-unclear-long-lived-or-serializable-connections-seem-a-specialized-use-case">Reconnection: unclear, long-lived or serializable connections seem a specialized use case?<a class="anchor" aria-label="anchor" href="#reconnection-unclear-long-lived-or-serializable-connections-seem-a-specialized-use-case"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/54" class="external-link">Reconnection</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/14" class="external-link"><code>dbIsValid()</code> fails in new sessions</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/21" class="external-link">Connector class needs to store expression to create driver</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/30" class="external-link">Feature request: add a dbResetConnection() generic</a></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="out-of-scope">Out of scope?<a class="anchor" aria-label="anchor" href="#out-of-scope"></a>
</h3>
<ul>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/29" class="external-link">Interface to call stored procedure with various parameters and their attributes need to be supported in DBI</a></p></li>
<li><p><a href="https://github.com/r-dbi/dbi3/issues/28" class="external-link">Any way to know if a connection is already inside a transaction?</a></p></li>
</ul>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/r-dbi/dbi3/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/r-dbi/dbi3/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dbi3</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://krlmlr.info/" class="external-link">Kirill Müller</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1416-3412" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=dbi3" class="external-link"><img src="https://www.r-pkg.org/badges/version/dbi3" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://krlmlr.info/" class="external-link">Kirill Müller</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
